<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Chicago’s Pandemic Rail Ridership - Part 2 Neighborhood Demographics | The City Scraper</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Chicago’s Pandemic Rail Ridership - Part 2 Neighborhood Demographics" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Utilizing the Census API to estimate neighborhood demographics." />
<meta property="og:description" content="Utilizing the Census API to estimate neighborhood demographics." />
<link rel="canonical" href="https://jmbahr.github.io/the-city-scraper/transit/2022/02/09/transit-post2-census-api.html" />
<meta property="og:url" content="https://jmbahr.github.io/the-city-scraper/transit/2022/02/09/transit-post2-census-api.html" />
<meta property="og:site_name" content="The City Scraper" />
<meta property="og:image" content="https://jmbahr.github.io/the-city-scraper/images/2022-02-09-census.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2022-02-09T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"Utilizing the Census API to estimate neighborhood demographics.","url":"https://jmbahr.github.io/the-city-scraper/transit/2022/02/09/transit-post2-census-api.html","@type":"BlogPosting","headline":"Chicago’s Pandemic Rail Ridership - Part 2 Neighborhood Demographics","dateModified":"2022-02-09T00:00:00-06:00","datePublished":"2022-02-09T00:00:00-06:00","image":"https://jmbahr.github.io/the-city-scraper/images/2022-02-09-census.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"https://jmbahr.github.io/the-city-scraper/transit/2022/02/09/transit-post2-census-api.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/the-city-scraper/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://jmbahr.github.io/the-city-scraper/feed.xml" title="The City Scraper" /><link rel="shortcut icon" type="image/x-icon" href="/the-city-scraper/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/the-city-scraper/">The City Scraper</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/the-city-scraper/about/">About Me</a><a class="page-link" href="/the-city-scraper/search/">Search</a><a class="page-link" href="/the-city-scraper/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Chicago&#39;s Pandemic Rail Ridership - Part 2 Neighborhood Demographics</h1><p class="page-description">Utilizing the Census API to estimate neighborhood demographics.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2022-02-09T00:00:00-06:00" itemprop="datePublished">
        Feb 9, 2022
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      4 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/the-city-scraper/categories/#transit">transit</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/jmbahr/the-city-scraper/tree/master/_notebooks/2022-02-09-transit-post2-census-api.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/the-city-scraper/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/jmbahr/the-city-scraper/master?filepath=_notebooks%2F2022-02-09-transit-post2-census-api.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/the-city-scraper/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/jmbahr/the-city-scraper/blob/master/_notebooks/2022-02-09-transit-post2-census-api.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/the-city-scraper/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#In-this-Post">In this Post </a></li>
<li class="toc-entry toc-h2"><a href="#Setup">Setup </a></li>
<li class="toc-entry toc-h2"><a href="#Define-Variables">Define Variables </a></li>
<li class="toc-entry toc-h2"><a href="#Generate-Query">Generate Query </a></li>
<li class="toc-entry toc-h2"><a href="#Read-Data">Read Data </a></li>
<li class="toc-entry toc-h2"><a href="#Derive-Metrics">Derive Metrics </a></li>
<li class="toc-entry toc-h2"><a href="#Summary">Summary </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2022-02-09-transit-post2-census-api.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="In-this-Post">
<a class="anchor" href="#In-this-Post" aria-hidden="true"><span class="octicon octicon-link"></span></a>In this Post<a class="anchor-link" href="#In-this-Post"> </a>
</h2>
<p>In this post we will explore the Census API, allowing us to read in 5-year American Community Survey (ACS) microdata.  We use this data given its improved stability and capabilities to drill down to the block-group level.  In Part 3, this will enable us to estimate granular demographic characteristics within a specified distance from each transit stop.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Setup">
<a class="anchor" href="#Setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setup<a class="anchor-link" href="#Setup"> </a>
</h2>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Define-Variables">
<a class="anchor" href="#Define-Variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Define Variables<a class="anchor-link" href="#Define-Variables"> </a>
</h2>
<p>While the Census API is extremely handy to avoid manually downloading data extracts, it is a bit manual to select relevant columns.  The Census Bureau provides an exhaustive data dictionary for each API it publishes.  In this case, we are able to use the 2019 5-year microdata data dictionary, found at <a href="https://api.census.gov/data/2019/acs/acs5/groups.html">this link</a>.</p>
<p>The level of grain of this data is at the census block-group level.  Thus, most variables are simply the sum of individuals that represent that particular characteristic or fall within a given range.  For instance, there will be  a variable that represents the number of married individuals, a variable that represents the number of single individuals, and additional variables for other marital statuses.  Furthermore, there are variables that represent the number of individuals that fall within a given income range.</p>
<p>Below, we create strings that include the name of variables we would like to include in our query.  These variables represent different income ranges and different levels of education.  As you can see, each topic has a general structure with different values to indicate different ranges of income or levels of education.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># B19001_011E is the first range that exceeds $50K</span>
<span class="c1"># we are looking specifically at the % of individuals making less than $50K</span>
<span class="c1"># so only need to count the number making over relative to total</span>
<span class="n">income_vars</span> <span class="o">=</span> <span class="s2">""</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span><span class="mi">18</span><span class="p">):</span>
    <span class="n">i_padded</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">'0'</span><span class="p">)</span>
    <span class="n">income_value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"B19001_0</span><span class="si">{</span><span class="n">i_padded</span><span class="si">}</span><span class="s2">E"</span>
    <span class="n">income_vars</span> <span class="o">=</span> <span class="n">income_vars</span> <span class="o">+</span> <span class="n">income_value</span> <span class="o">+</span> <span class="s2">","</span>

<span class="c1"># iterate through education variables to create string for query</span>
<span class="n">educ_vars</span> <span class="o">=</span> <span class="s2">""</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">17</span><span class="p">):</span>
    <span class="n">i_padded</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">'0'</span><span class="p">)</span>
    <span class="n">educ_value</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"B15003_0</span><span class="si">{</span><span class="n">i_padded</span><span class="si">}</span><span class="s2">E"</span>
    <span class="n">educ_vars</span> <span class="o">=</span> <span class="n">educ_vars</span> <span class="o">+</span> <span class="n">educ_value</span> <span class="o">+</span> <span class="s2">","</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Generate-Query">
<a class="anchor" href="#Generate-Query" aria-hidden="true"><span class="octicon octicon-link"></span></a>Generate Query<a class="anchor-link" href="#Generate-Query"> </a>
</h2>
<p>Queries follow a straightforward pattern.  They stem from a base URL that must specify the appropriate year.  The base URL is followed by a <code>get</code> argument, where we are able to specify the variables we would like returned.  Finally, we must specify the geography of interest in the <code>for</code> argument.  We must specify the <strong>block-group code</strong>, <strong>state</strong>, and <strong>county code</strong> to return.  In this case I am returning every county and block-group in the state of Illinois.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># percent in poverty</span>
<span class="c1"># percent people of color </span>
<span class="c1"># percent less than hs diploma</span>


<span class="n">variable_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"B01001_001E"</span><span class="p">:</span> <span class="s2">"total_population"</span><span class="p">,</span>
                 <span class="s2">"B17020_001E"</span><span class="p">:</span> <span class="s2">"poverty_status"</span><span class="p">,</span>
                 <span class="s2">"B19001_001E"</span><span class="p">:</span> <span class="s2">"total_pop_income"</span><span class="p">,</span>
                 <span class="s2">"B01001H_001E"</span><span class="p">:</span> <span class="s2">"white_non_hispanic_population"</span><span class="p">}</span>


<span class="c1"># define year</span>
<span class="n">acs_year</span> <span class="o">=</span> <span class="s2">"2019"</span>

<span class="c1"># dynamic base URL based on year</span>
<span class="n">base_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"https://api.census.gov/data/</span><span class="si">{</span><span class="n">acs_year</span><span class="si">}</span><span class="s2">/acs/acs5"</span>

<span class="c1"># create string of variables to return</span>
<span class="n">variable_names</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"NAME,B19001_001E,</span><span class="si">{</span><span class="n">income_vars</span><span class="si">}{</span><span class="n">educ_vars</span><span class="si">}</span><span class="s2">B01001_002E,B02001_002E,B02001_001E"</span>

<span class="c1"># create geography query, specifiying the state, county, and block group</span>
<span class="n">state_code</span> <span class="o">=</span> <span class="s2">"17"</span>
<span class="n">county_code</span> <span class="o">=</span> <span class="s2">"*"</span>
<span class="n">block_group_code</span> <span class="o">=</span> <span class="s2">"*"</span>
<span class="n">geo_query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"block%20group:</span><span class="si">{</span><span class="n">block_group_code</span><span class="si">}</span><span class="s2">&amp;in=state:</span><span class="si">{</span><span class="n">state_code</span><span class="si">}</span><span class="s2">%20county:</span><span class="si">{</span><span class="n">county_code</span><span class="si">}</span><span class="s2">"</span>

<span class="c1"># combine elements of our query</span>
<span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">base_url</span><span class="si">}</span><span class="s2">?get=</span><span class="si">{</span><span class="n">variable_names</span><span class="si">}</span><span class="s2">&amp;for=</span><span class="si">{</span><span class="n">geo_query</span><span class="si">}</span><span class="s2">"</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Read-Data">
<a class="anchor" href="#Read-Data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Read Data<a class="anchor-link" href="#Read-Data"> </a>
</h2>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">census_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>

<span class="c1"># convert first row to column names</span>
<span class="n">census_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">census_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">census_df</span> <span class="o">=</span> <span class="n">census_df</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>


<span class="c1"># convert value columns to numeric</span>
<span class="n">value_cols</span> <span class="o">=</span> <span class="n">census_df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">'B'</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span>

<span class="n">census_df</span><span class="p">[</span><span class="n">value_cols</span><span class="p">]</span> <span class="o">=</span> <span class="n">census_df</span><span class="p">[</span><span class="n">value_cols</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">'coerce'</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Derive-Metrics">
<a class="anchor" href="#Derive-Metrics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Derive Metrics<a class="anchor-link" href="#Derive-Metrics"> </a>
</h2>
<p>Now, we aim to derive new columns to measure the following:</p>
<ul>
<li>The number of households without a highschool degree</li>
<li>The number of non-white households</li>
<li>The number of households making less than $50K a year</li>
</ul>
<p>Given our variables are just total counts of individuals that satisfy different characteristics, our derived metrics are the result of simply taking the sum of different columns.  The results are summable across geographies.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">census_derived_df</span> <span class="o">=</span> <span class="n">census_df</span> \
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">n_over_50k</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B19001_011E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B19001_012E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B19001_013E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B19001_014E'</span><span class="p">]</span> <span class="o">+</span>
                                   <span class="n">x</span><span class="p">[</span><span class="s1">'B19001_015E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B19001_016E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B19001_017E'</span><span class="p">],</span>
            <span class="n">total_income</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B19001_001E'</span><span class="p">],</span>
            <span class="n">pct_over_50k</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'n_over_50k'</span><span class="p">]</span> <span class="o">/</span> <span class="n">x</span><span class="p">[</span><span class="s1">'total_income'</span><span class="p">],</span>
            <span class="n">n_non_white</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B02001_001E'</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B02001_002E'</span><span class="p">],</span>
            <span class="n">total_race</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B02001_001E'</span><span class="p">],</span>
            <span class="n">pct_non_white</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'n_non_white'</span><span class="p">]</span> <span class="o">/</span> <span class="n">x</span><span class="p">[</span><span class="s1">'total_race'</span><span class="p">],</span>
            <span class="n">n_nohs</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_002E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_003E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_004E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_005E'</span><span class="p">]</span> <span class="o">+</span>
                               <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_006E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_007E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_008E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_009E'</span><span class="p">]</span> <span class="o">+</span>
                               <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_010E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_011E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_012E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_013E'</span><span class="p">]</span> <span class="o">+</span>
                               <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_014E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_015E'</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_016E'</span><span class="p">],</span>
            <span class="n">total_educ</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'B15003_001E'</span><span class="p">],</span>
            <span class="n">pct_nohs</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'n_nohs'</span><span class="p">]</span> <span class="o">/</span> <span class="n">x</span><span class="p">[</span><span class="s1">'total_educ'</span><span class="p">])</span>

<span class="n">census_derived_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">"../data/census_derived_df.csv"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Summary">
<a class="anchor" href="#Summary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summary<a class="anchor-link" href="#Summary"> </a>
</h2>
<p>Using the Census API, we were able to programatically pull in relevant variables to estimate different demographic characteristics for a given geography.  In Part 3, we will look at how we tie these demographic characteristics to given transit stops based on proximity.</p>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="jmbahr/the-city-scraper"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/the-city-scraper/transit/2022/02/09/transit-post2-census-api.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/the-city-scraper/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/the-city-scraper/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/the-city-scraper/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>An exploration of Data Science topics through the lens of city data.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jmbahr" target="_blank" title="jmbahr"><svg class="svg-icon grey"><use xlink:href="/the-city-scraper/assets/minima-social-icons.svg#github"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
