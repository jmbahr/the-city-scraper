<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Chicago’s Pandemic Rail Ridership - Part 1 Ridership Changes | The City Scraper</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Chicago’s Pandemic Rail Ridership - Part 1 Ridership Changes" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A look at changes in Chicago rail ridership during the pandemic." />
<meta property="og:description" content="A look at changes in Chicago rail ridership during the pandemic." />
<link rel="canonical" href="https://jmbahr.github.io/the-city-scraper/transit/2021/12/29/chicago-transit-post1.html" />
<meta property="og:url" content="https://jmbahr.github.io/the-city-scraper/transit/2021/12/29/chicago-transit-post1.html" />
<meta property="og:site_name" content="The City Scraper" />
<meta property="og:image" content="https://jmbahr.github.io/the-city-scraper/images/2021-12-29-cta.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-12-29T00:00:00-06:00" />
<script type="application/ld+json">
{"description":"A look at changes in Chicago rail ridership during the pandemic.","url":"https://jmbahr.github.io/the-city-scraper/transit/2021/12/29/chicago-transit-post1.html","@type":"BlogPosting","headline":"Chicago’s Pandemic Rail Ridership - Part 1 Ridership Changes","dateModified":"2021-12-29T00:00:00-06:00","datePublished":"2021-12-29T00:00:00-06:00","image":"https://jmbahr.github.io/the-city-scraper/images/2021-12-29-cta.jpeg","mainEntityOfPage":{"@type":"WebPage","@id":"https://jmbahr.github.io/the-city-scraper/transit/2021/12/29/chicago-transit-post1.html"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/the-city-scraper/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://jmbahr.github.io/the-city-scraper/feed.xml" title="The City Scraper" /><link rel="shortcut icon" type="image/x-icon" href="/the-city-scraper/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/the-city-scraper/">The City Scraper</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/the-city-scraper/about/">About Me</a><a class="page-link" href="/the-city-scraper/search/">Search</a><a class="page-link" href="/the-city-scraper/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Chicago&#39;s Pandemic Rail Ridership - Part 1 Ridership Changes</h1><p class="page-description">A look at changes in Chicago rail ridership during the pandemic.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2021-12-29T00:00:00-06:00" itemprop="datePublished">
        Dec 29, 2021
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      4 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/the-city-scraper/categories/#transit">transit</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/jmbahr/the-city-scraper/tree/master/_notebooks/2021-12-29-chicago-transit-post1.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/the-city-scraper/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/jmbahr/the-city-scraper/master?filepath=_notebooks%2F2021-12-29-chicago-transit-post1.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/the-city-scraper/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/jmbahr/the-city-scraper/blob/master/_notebooks/2021-12-29-chicago-transit-post1.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/the-city-scraper/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
<li class="toc-entry toc-h2"><a href="#Chicago-Rail-Ridership-Series">Chicago Rail Ridership Series </a></li>
<li class="toc-entry toc-h2"><a href="#In-this-Post">In this Post </a></li>
<li class="toc-entry toc-h2"><a href="#Setup">Setup </a></li>
<li class="toc-entry toc-h2"><a href="#Read-Data">Read Data </a></li>
<li class="toc-entry toc-h2"><a href="#Aggregate-Ridership">Aggregate Ridership </a></li>
<li class="toc-entry toc-h2"><a href="#Pivot-Ridership-Data-Wide-by-Year">Pivot Ridership Data Wide by Year </a></li>
<li class="toc-entry toc-h2"><a href="#Calculate-Year-Over-Year-Change">Calculate Year-Over-Year Change </a></li>
<li class="toc-entry toc-h2"><a href="#Summary">Summary </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2021-12-29-chicago-transit-post1.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Chicago-Rail-Ridership-Series">
<a class="anchor" href="#Chicago-Rail-Ridership-Series" aria-hidden="true"><span class="octicon octicon-link"></span></a>Chicago Rail Ridership Series<a class="anchor-link" href="#Chicago-Rail-Ridership-Series"> </a>
</h2>
<p>Inspired by a <a href="https://www.urban.org/urban-wire/transit-ridership-dropped-heavy-rail-stations-during-covid-19-pandemic-ridership-change-depended-neighborhood-characteristics">post</a> from the Urban Institute's blog, I wanted to reproduce and extend a portion of their analysis.</p>
<p>This analysis focuses on the City of Chicago and first investigates rail ridership changes between 2019 and 2020 from the months of April to June.  As the author's highlight, rail stops that saw different changes in ridership were likely to differ in demographic characteristics.</p>
<p>While some individuals lost their jobs or were able to work from home, many essential workers still needed to get to a phyiscal location to do their job.  Thus it is reasonable to assume that rail stops with residents more likely to be essential workers would see less extreme declines in ridership.</p>
<p>In order to conduct this analysis we will be looking at data from the Chicago Transit Authority (CTA).  It publishes daily, stop-specific ridership information that allows for robust analysis.  CTA also publishes rail stop information, including geographic coordinates.  Using American Community Survey data, we will be able to summarise the demographic characteristics of residents living within a half mile of each rail station.</p>
<p>For this series, we will walk through several posts to highlight different techniques.</p>
<p>In the first post, we will simply read in the ridership data and analyze year-over-year changes by stop.</p>
<p>In our second post, we will combine the geographic coordinates of each stop with Census data to identify individuals that reside within a half mile of each stop.</p>
<p>In our third post, we will summarise the demographic characteristics of the individuals falling within 0.5 miles of each stop.</p>
<p>Finally, we will tie these together by investigating the relationships between demographic characteristics and ridership changes.</p>
<p>From a policy perspective, this analysis provides grounds for investment in transit in neighborhoods that rely on it most heavily, especially in times of crisis.  In order to build resilient cities, <strong>essential workers should have easy access to transit that is most readily available when they are most essential</strong>.</p>
<p>I'm excited, let's go!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="In-this-Post">
<a class="anchor" href="#In-this-Post" aria-hidden="true"><span class="octicon octicon-link"></span></a>In this Post<a class="anchor-link" href="#In-this-Post"> </a>
</h2>
<p>In this post we will be keeping things simple.  We read in the <a href="https://data.cityofchicago.org/Transportation/CTA-Ridership-L-Station-Entries-Daily-Totals/5neh-572f">CTA daily rail ridership data</a> and summarize changes in ridership across years.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Setup">
<a class="anchor" href="#Setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setup<a class="anchor-link" href="#Setup"> </a>
</h2>
<p>For this post we need to have <code>pandas</code> available in our environment.  We also need to make the <code>generate_query</code> function outlined in <a href="./2021-08-19-read-socrata.ipynb">this post</a> available.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># import user-defined function to clean up soql queries</span>
<span class="kn">from</span> <span class="nn">resources.config</span> <span class="kn">import</span> <span class="n">generate_query</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Read-Data">
<a class="anchor" href="#Read-Data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Read Data<a class="anchor-link" href="#Read-Data"> </a>
</h2>
<p>We will be using data from the Chicago Transit Authority that is warehoused within the City of Chicago's Open Data Portal.  Very conveniently, Chicago uses Socrata to warehouse their Open Data.  We can use the principles from <a href="./2021-08-19-read-socrata.ipynb">this post</a> to help us read in the data.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ridership_endpoint</span> <span class="o">=</span> <span class="s2">"https://data.cityofchicago.org/resource/5neh-572f.json"</span>

<span class="n">ridership_query</span> <span class="o">=</span> <span class="n">generate_query</span><span class="p">(</span><span class="n">endpoint_url</span><span class="o">=</span><span class="n">ridership_endpoint</span><span class="p">,</span>
                                 <span class="n">query</span> <span class="o">=</span> <span class="s2">"""select station_id, </span>
<span class="s2">                                                   date_extract_y(date) as year,</span>
<span class="s2">                                                   date_extract_m(date) as month, </span>
<span class="s2">                                                   sum(rides) as rides </span>
<span class="s2">                                            where date&gt;='2019-01-01'</span>
<span class="s2">                                            and date&lt;='2020-07-01'</span>
<span class="s2">                                            group by station_id, </span>
<span class="s2">                                                     date_extract_y(date),</span>
<span class="s2">                                                     date_extract_m(date)"""</span><span class="p">,</span>
                                 <span class="n">limit</span> <span class="o">=</span> <span class="mi">50000</span><span class="p">)</span>

<span class="n">rides_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">ridership_query</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Aggregate-Ridership">
<a class="anchor" href="#Aggregate-Ridership" aria-hidden="true"><span class="octicon octicon-link"></span></a>Aggregate Ridership<a class="anchor-link" href="#Aggregate-Ridership"> </a>
</h2>
<p>Here, we filter to observations in April, May, and June and then summarise the number of rides by year.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">agg_rides_df</span> <span class="o">=</span> <span class="n">rides_df</span> \
    <span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s2">"month == [4,5,6]"</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">'station_id'</span><span class="p">,</span><span class="s1">'year'</span><span class="p">],</span> <span class="n">as_index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">aggregate</span><span class="p">({</span><span class="s1">'rides'</span><span class="p">:</span><span class="s1">'sum'</span><span class="p">})</span>

<span class="n">agg_rides_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>station_id</th>
      <th>year</th>
      <th>rides</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>40010</td>
      <td>2019</td>
      <td>140717</td>
    </tr>
    <tr>
      <th>1</th>
      <td>40010</td>
      <td>2020</td>
      <td>25533</td>
    </tr>
    <tr>
      <th>2</th>
      <td>40020</td>
      <td>2019</td>
      <td>284197</td>
    </tr>
    <tr>
      <th>3</th>
      <td>40020</td>
      <td>2020</td>
      <td>68098</td>
    </tr>
    <tr>
      <th>4</th>
      <td>40030</td>
      <td>2019</td>
      <td>125606</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Pivot-Ridership-Data-Wide-by-Year">
<a class="anchor" href="#Pivot-Ridership-Data-Wide-by-Year" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pivot Ridership Data Wide by Year<a class="anchor-link" href="#Pivot-Ridership-Data-Wide-by-Year"> </a>
</h2>
<p>Using the <code>pivot</code> function, we pivout our data wide such that each station has a column for rides in both 2019 and 2020.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">agg_rides_wide_df</span> <span class="o">=</span> <span class="n">agg_rides_df</span> \
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">'year_'</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="s1">'year'</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span> \
    <span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span> <span class="o">=</span> <span class="s1">'station_id'</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">'year'</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">'rides'</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="n">agg_rides_wide_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>year</th>
      <th>station_id</th>
      <th>year_2019</th>
      <th>year_2020</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>40010</td>
      <td>140717</td>
      <td>25533</td>
    </tr>
    <tr>
      <th>1</th>
      <td>40020</td>
      <td>284197</td>
      <td>68098</td>
    </tr>
    <tr>
      <th>2</th>
      <td>40030</td>
      <td>125606</td>
      <td>40887</td>
    </tr>
    <tr>
      <th>3</th>
      <td>40040</td>
      <td>564445</td>
      <td>29337</td>
    </tr>
    <tr>
      <th>4</th>
      <td>40050</td>
      <td>286127</td>
      <td>41275</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Calculate-Year-Over-Year-Change">
<a class="anchor" href="#Calculate-Year-Over-Year-Change" aria-hidden="true"><span class="octicon octicon-link"></span></a>Calculate Year-Over-Year Change<a class="anchor-link" href="#Calculate-Year-Over-Year-Change"> </a>
</h2>
<p>Finally, we calculate the change in ridership from 2019 to 2020.</p>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rides_change_df</span> <span class="o">=</span> <span class="n">agg_rides_wide_df</span> \
    <span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="n">abs_change</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'year_2020'</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="s1">'year_2019'</span><span class="p">],</span>
            <span class="n">pct_change</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">'abs_change'</span><span class="p">]</span> <span class="o">/</span> <span class="n">x</span><span class="p">[</span><span class="s1">'year_2019'</span><span class="p">])</span>

<span class="c1"># write to csv for next post</span>
<span class="n">rides_change_df</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">path_or_buf</span><span class="o">=</span><span class="s2">"./resources/rides_change_df.csv"</span><span class="p">)</span>

<span class="n">rides_change_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>year</th>
      <th>station_id</th>
      <th>year_2019</th>
      <th>year_2020</th>
      <th>abs_change</th>
      <th>pct_change</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>40010</td>
      <td>140717</td>
      <td>25533</td>
      <td>-115184</td>
      <td>-0.818551</td>
    </tr>
    <tr>
      <th>1</th>
      <td>40020</td>
      <td>284197</td>
      <td>68098</td>
      <td>-216099</td>
      <td>-0.760385</td>
    </tr>
    <tr>
      <th>2</th>
      <td>40030</td>
      <td>125606</td>
      <td>40887</td>
      <td>-84719</td>
      <td>-0.674482</td>
    </tr>
    <tr>
      <th>3</th>
      <td>40040</td>
      <td>564445</td>
      <td>29337</td>
      <td>-535108</td>
      <td>-0.948025</td>
    </tr>
    <tr>
      <th>4</th>
      <td>40050</td>
      <td>286127</td>
      <td>41275</td>
      <td>-244852</td>
      <td>-0.855746</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Summary">
<a class="anchor" href="#Summary" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summary<a class="anchor-link" href="#Summary"> </a>
</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We now have a clean data frame with changes in ridership for each rail station.  In the next post in the series we will explore how to identify Census respondents within a half mile of each station.</p>

</div>
</div>
</div>
</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="jmbahr/the-city-scraper"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/the-city-scraper/transit/2021/12/29/chicago-transit-post1.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/the-city-scraper/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/the-city-scraper/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/the-city-scraper/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>An exploration of Data Science topics through the lens of city data.</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/jmbahr" title="jmbahr"><svg class="svg-icon grey"><use xlink:href="/the-city-scraper/assets/minima-social-icons.svg#github"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
